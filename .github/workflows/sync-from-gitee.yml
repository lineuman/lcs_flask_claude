name: Sync Gitee to GitHub

on:
  workflow_dispatch:
  schedule:
    - cron: '0 6,14,15,16 * * *'

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Sync from Gitee to GitHub
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}  # ç¡®ä¿è¿™ä¸ª secret å­˜åœ¨ï¼
        run: |
          set -ex

          # å…‹éš† Gitee ä»“åº“
          git clone https://gitee.com/lineuman/lcs_flask_claude.git repo
          cd repo

          # è®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼ˆå¿…é¡»ï¼‰
          git config user.name "lineuman"
          git config user.email "actions@github.com"

          # æ·»åŠ  GitHub è¿œç¨‹ä»“åº“
          git remote add github https://${{ secrets.GH_TOKEN }}@github.com/lineuman/lcs_flask_claude.git

          # å¼ºåˆ¶æ¨é€åˆ° GitHub çš„ master åˆ†æ”¯
          git push -f github master

          echo "ğŸ‰ Sync completed!"
